(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=(e,t)=>{let o=e.getAttribute("id");o=o.replace("popup-builder-","");const{entrAnimation:s,exitAnimation:n,animationDuration:r,type:i}=t||{},p=e.querySelector(".popup-builder-container");p.classList.remove(`${s}`),p.classList.add(`${n}`),p.classList.add("reverse"),setTimeout((()=>{["popup","full-screen"].includes(i)&&t?.preventScroll&&(window.parent.document.body.style.overflow=""),e.classList.remove("popup-builder-modal--open"),p.classList.remove(`${n}`),p.classList.remove("reverse"),window.frameElement&&window.frameElement.remove()}),1e3*r)},o=window.wp.apiFetch;var s=e.n(o);const n=(e,t)=>{e&&!function(e){const t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():null}(`pbb_conversion_${t}`)&&((e,t)=>{const o=Number(sessionStorage.getItem("pbb_logs"));location.search.includes("iframe=true")&&s()({path:"/pbb/v1/popup/logs",method:"PUT",data:{id:o,...e}}).then((e=>{t&&t(e)}))})({converted:!0,refferer:window.parent.document.referrer},(e=>{"success"===e.status?function(e,t,o){let s=`${e}=${t}; path=/`;if(o){const e=new Date;e.setTime(e.getTime()+60*o*60*1e3),s+=`; expires=${e.toUTCString()}`}document.cookie=s}(`pbb_conversion_${t}`,"true",8760):console.error("Error updating conversion count:",e.message)}))},r=window.wp.hooks;window.addEventListener("load",(()=>{const e=document.querySelectorAll(".pbb-btn"),o=(e,t)=>{const o=document.getElementById(`popup-builder-${e}`),s=JSON.parse(o.getAttribute("data-settings"));t(o,s)};for(const s of e){const e=JSON.parse(s.getAttribute("data-settings")),{istrackConversion:i,clickEvent:p,closeCampaign:c,step:a}=e||{};(["closeCampaign","openUrl","step"].includes(p)||i)&&s.addEventListener("click",(l=>{l.preventDefault();const u=s.closest(".popup-builder-modal"),d=u?.id.replace("popup-builder-","");if(n(i,d),"closeCampaign"===p&&c)o(c,t);else if("openUrl"===p){const e=s.getAttribute("href"),t=s.getAttribute("target");e&&window.top.open(e,t||"_self")}else if("step"===p&&a){const t=(0,r.applyFilters)("popupkit.steps.button",""),o=document.querySelectorAll(".wp-block-popup-builder-block-step");for(const e of o)e.classList.contains("active")&&e.classList.remove("active");const s=t[parseInt(a)];s.classList.add("active"),document.querySelector(".popupkit-steps-inner").insertBefore(s,o[parseInt(e.step)])}}))}}))})();